<!--
template: /templates/page.html
buildScript: /scripts/getNotesLastFive.js
-->

<h1 class="sr-only">Home</h1>
<p class="h1">Hello from <span id="weather">sunny</span> Berlin!</p>
<section>
  <h2 class="mb-s">Latest notes</h2>
  <ul role="list" class="mb-m">
    <li>Notes go here</li>
  </ul>
  <a href="/notes">See all notes</a>
</section>
<script type="module">
  async function getWeather() {
    try {
      const res = await fetch(
        `https://api.brightsky.dev/current_weather?wmo_station_id=10384`
      );
      const data = await res.json();
      const weatherCode = data.weather.icon;
      switch (weatherCode) {
        case "clear-night":
        case "partly-cloudy-night":
          return "starry";
        case "clear-day":
          return "sunny";
        case "partly-cloudy-day":
        case "cloudy":
          return "cloudy";
        case "fog":
          return "foggy";
        case "wind":
          return "windy";
        case "rain":
          return "rainy";
        case "sleet":
          return "sleety";
        case "snow":
          return "snowy";
        case "hail":
          return "haily";
        case "thunderstorm":
          return "stormy";
        default:
          return null;
      }
    } catch (error) {
      return null;
    }
  }
  async function setWeather() {
    const weather = await getWeather();
    if (weather) {
      const weatherElement = document.getElementById("weather");
      weatherElement.innerText = weather;
    }
  }
  setWeather();
</script>
